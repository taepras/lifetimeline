{"version":3,"sources":["config/Theme.js","GlobalStyle.js","components/FullScreenPage.js","components/Container.js","components/Select.js","components/Button.js","config/Config.js","components/YearSelector.js","pages/Home.js","components/CenterBox.js","pages/Intro.js","components/EventBubble.js","components/EventDialog.js","components/Dialog.js","components/YearGroup.js","data/events.csv","data/celebrities.csv","data/life.csv","pages/TimelineContent.js","pages/Timeline.js","components/MenuBar.js","App.js","reportWebVitals.js","index.js"],"names":["containerMaxWidth","bubbleXOffset","spacing","xxs","BASE_UNIT","xs","x1","x2","x3","x4","GlobalStyle","createGlobalStyle","isBorn","Theme","FullScreenPage","styled","div","z","console","log","theme","Container","padding","fillHeight","Select","select","Button","button","block","outlined","Utils","yearAd","yearMode","text","x","min","max","Math","useStateWithPromise","initialState","useState","state","setState","resolverRef","useRef","useEffect","current","handleSetState","useCallback","stateAction","Promise","resolve","yearRangeMin","yearRangeMax","defaultYearMode","yearsOffset","yearHeight","spacePerEvent","yOffsetCollapsedEvents","xSpacePerCollapsedEvent","xOffsetCollapsedEvents","zoomStep","minZoom","maxZoomSteps","generations","2010","1997","1981","1965","1946","YearSelector","onSubmit","year","Config","buttonLabel","yearRange","selectedYear","setSelectedYear","errorMsg","setErrorMsg","i","push","onChange","e","target","value","reverse","map","y","className","onClick","Title","h1","Home","onProceed","style","display","alignItems","marginBottom","StyledCenterBox","CenterBox","children","IntroPage","blink","blinkTop","keyframes","blinkBottom","blinkText","IntroText","EyelidTop","EyelidBottom","Intro","birthYear","onPageChange","isBlinking","setBlinking","setTimeout","blinkDelay","handleColorType","type","EventThumbnail","collapsed","eventType","lighten","image","darken","StyledEvent","relative","EventIcon","EventDescription","EventBubble","title","onCollapsedClick","transform","backgroundImage","src","alt","opacity","FadeOverlay","open","StyledEventDialog","CloseButton","EventDialog","setOpen","data","onClose","onBirthYearChange","currentTarget","marginRight","getTypeLabel","name","event","Date","getFullYear","link","as","href","width","Dialog","StyledYearGroup","YearNumber","Tick","YearGroup","zoomLevel","smoothTransition","onDialogOpen","maxDisplay","useMemo","floor","getBubbleYPosition","index","ceil","getBubbleXPosition","transition","Array","d","events","TimelineContainer","ZoomControls","EndPrompt","TimelineLine","zoomExtent","yearStartDisplay","yearEndDisplay","timelineMinLength","timelineMaxLength","maxZoomOffset","maxContainerHeight","scaleY","d3Scale","domain","range","TimelineContent","openDialog","onScroll","onWheel","onTouchStart","setOpenYearChange","refLineYOffset","eventsNested","_setEventsNested","d3","setTransform","transformedScaleY","setTransformedScaleY","yearAtRefLine","setYearAtRefLine","scrollRangeYear","scrollRange","currentScrollListener","setCurrentScrollListener","timelineRef","eventsNestedFiltered","filter","endPromptY","window","removeEventListener","handleScroll","scrollOffset","document","body","scrollTop","documentElement","preventDefault","scrollTo","offsetY","invert","currentYear","addEventListener","passive","setEventsNested","newEventsNested","eventsNestedTemp","clone","forEach","then","zoomAt","t","k","yOnCurrentZoom","translate","scale","zoom","dz","centerY","tempZoomLevel","zoomCenterY","tempTransform","tempScaleY","rescaleY","scrollToYear","scrollY","top","behavior","all","eventsData","lifeData","celebsData","files","celebrities","d3Collection","key","entries","values","sort","importance","yearList","g","yr","includes","a","b","preprocessData","height","position","ref","eventGroup","pageY","Banner","RefLineContainer","RefLine","AgeBox","AgeIcon","Age","AgeInfo","Timeline","setBirthYear","onYearChange","isDialogOpen","setDialogOpen","dialogData","setDialogData","openYearChange","refLineEl","innerHeight","iconAtAge","age","fontSize","StyledMenuBar","MenuItem","toggle","MenuBar","mode","onYearModeChange","onOpenAbout","onHome","onToggleLegend","handleYearMode","flexGrow","BottomDrawer","LegendIcon","Tutorial","show","verticalSwipe","ScrollAnimation","App","appMode","setAppMode","setYearMode","isTransitioning","setTransitioning","openAbout","setOpenAbout","openLegend","setOpenLegend","touchInitiated","setTouchInitiated","startTimeline","page","id","fontWeight","cursor","flexDirection","gap","backgroundColor","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cdf54910.chunk.js","sourcesContent":["const BASE_UNIT = 8;\r\n\r\nexport default {\r\n    containerMaxWidth: 480,\r\n    bubbleXOffset: 100,\r\n    spacing: {\r\n        xxs: BASE_UNIT / 4,\r\n        xs: BASE_UNIT / 2,\r\n        x1: BASE_UNIT,\r\n        x2: BASE_UNIT * 2,\r\n        x3: BASE_UNIT * 3,\r\n        x4: BASE_UNIT * 4,\r\n    }\r\n};","import { createGlobalStyle } from \"styled-components\";\r\nimport Theme from \"./config/Theme\";\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n  body {\r\n    /* background-color: #DED8C9; */\r\n    height: 100vh;\r\n    background-attachment: fixed;\r\n    background-repeat: no-repeat;\r\n\r\n    background-color: #DED8C9;\r\n    color: #333;\r\n    /* background: \r\n    radial-gradient(\r\n        100% 60% at 50% 45%, \r\n        rgba(137, 130, 119, 0) 30%, \r\n        rgba(85, 80, 72, 0.57) 85%, \r\n        rgba(85, 80, 72, 0.75) 100%\r\n      ), \r\n      #DED8C9; */\r\n    background-blend-mode: normal, normal;\r\n    \r\n    &::after {\r\n      content: \" \";\r\n      background: \r\n      ${({ isBorn }) => (isBorn ? \r\n        `radial-gradient(\r\n          100% 60% at 50% 45%, \r\n          rgba(85, 80, 72, 0) 30%, \r\n          rgba(85, 80, 72, 0.2) 85%, \r\n          rgba(85, 80, 72, 0.4) 100%\r\n        );`\r\n        :\r\n        `radial-gradient(\r\n          100% 60% at 50% 45%, \r\n          rgba(0, 0, 0, 0) 30%, \r\n          rgba(0, 0, 0, 0.2) 85%, \r\n          rgba(0, 0, 0, 0.4) 100%\r\n        );`\r\n      )}\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      pointer-events: none;\r\n      z-index: 0;\r\n    }\r\n\r\n    font-family: thonglor;\r\n    font-size: 20px;\r\n  }\r\n\r\n  h1, h2, h3, h4, h5, h6 {\r\n    font-family: anugrom;\r\n    font-weight: normal;\r\n  }\r\n\r\n  p {\r\n    margin-top: 0;\r\n    margin-bottom: ${Theme.spacing.x2}px;\r\n  }\r\n\r\n  .mt-0 { margin-top: 0; }\r\n  .mt-1 { margin-top: ${Theme.spacing.x1}px !important; }\r\n  .mt-2 { margin-top: ${Theme.spacing.x2}px !important; }\r\n  .mt-3 { margin-top: ${Theme.spacing.x3}px !important; }\r\n  .mt-4 { margin-top: ${Theme.spacing.x4}px !important; }\r\n\r\n  .mb-0 { margin-bottom: 0; }\r\n  .mb-1 { margin-bottom: ${Theme.spacing.x1}px !important; }\r\n  .mb-2 { margin-bottom: ${Theme.spacing.x2}px !important; }\r\n  .mb-3 { margin-bottom: ${Theme.spacing.x3}px !important; }\r\n  .mb-4 { margin-bottom: ${Theme.spacing.x4}px !important; }\r\n\r\n  .mr-0 { margin-right: 0; }\r\n  .mr-1 { margin-right: ${Theme.spacing.x1}px !important; }\r\n  .mr-2 { margin-right: ${Theme.spacing.x2}px !important; }\r\n  .mr-3 { margin-right: ${Theme.spacing.x3}px !important; }\r\n  .mr-4 { margin-right: ${Theme.spacing.x4}px !important; }\r\n\r\n  .text-center { text-align: center; }\r\n  .text-left { text-align: left; }\r\n  .text-right { text-align: right; }\r\n`;\r\n\r\nexport default GlobalStyle;\r\n","import styled from 'styled-components';\r\n\r\nconst FullScreenPage = styled.div`\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    bottom: 0;\r\n    right: 0;\r\n    z-index: ${({z}) => z || 1};\r\n`\r\n\r\nexport default FullScreenPage;","import styled from 'styled-components';\r\nimport theme from '../config/Theme';\r\n\r\nconsole.log(theme.spacing.x2);\r\n\r\nconst Container = styled.div`\r\n    width: auto;\r\n    max-width: ${theme.containerMaxWidth}px;\r\n    margin: auto;\r\n    padding: 0 ${({padding}) => padding || theme.spacing.x2}px;\r\n\r\n    ${({fillHeight}) => fillHeight && `height: 100%;`}\r\n`\r\n\r\nexport default Container;","import styled from 'styled-components';\r\nimport theme from '../config/Theme';\r\n\r\nconst Select = styled.select`\r\n    width: 100%;\r\n    border: 1px solid #eee;\r\n    border-radius: ${theme.spacing.xs}px;\r\n    box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);\r\n    height: ${theme.spacing.x4}px;\r\n    padding: 0 ${theme.spacing.x1}px;\r\n`\r\n\r\nexport default Select;","import styled from \"styled-components\";\r\nimport theme from \"../config/Theme\";\r\n\r\nconst Button = styled.button`\r\n  ${({ block }) => block && `\r\n    display: block;\r\n    width: 100%;\r\n  `}\r\n  text-align: center;\r\n  border: ${({ outlined }) => (outlined ? \"1px solid #fff\" : \"none\")};\r\n  border-radius: ${theme.spacing.xs}px;\r\n  /* height: ${theme.spacing.x4}px; */\r\n  padding: ${theme.spacing.x1}px ${theme.spacing.x1 * 1.5}px;\r\n  background-color: ${({ outlined }) => (outlined ? \"transparent\" : \"#C14953\")};\r\n  ${({ outlined }) =>\r\n    !outlined && `box-shadow: 0px 4px 8px rgba(142, 34, 43, 0.21);`}\r\n  color: #fff;\r\n\r\n  cursor: pointer;\r\n\r\n  transition: all 0.2s;\r\n  text-decoration: none;\r\n\r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0px 6px 12px rgba(81, 17, 21, 0.5);\r\n  }\r\n`;\r\n\r\nexport default Button;\r\n","import { useState, useRef, useCallback, useEffect } from 'react';\r\n\r\nconst generations = {\r\n  2010: 'Generation Alpha',\r\n  1997: 'Generation Z',\r\n  1981: 'Generation Y',\r\n  1965: 'Generation X',\r\n  1946: 'Baby Boomer',\r\n}\r\n\r\nexport const Utils = {\r\n  typeYear: (yearAd, yearMode = \"ad\", text = false) =>\r\n    (text ? (yearMode == \"ad\" ? \"ค.ศ. \" : \"พ.ศ. \") : \"\") +\r\n    (yearMode == \"ad\" ? +yearAd : +yearAd + 543),\r\n  Clamp: (x, min, max) => Math.min(Math.max(x, min), max),\r\n};\r\n\r\nexport const useStateWithPromise = (initialState) => {\r\n  const [state, setState] = useState(initialState);\r\n  const resolverRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (resolverRef.current) {\r\n      resolverRef.current(state);\r\n      resolverRef.current = null;\r\n    }\r\n    /**\r\n     * Since a state update could be triggered with the exact same state again,\r\n     * it's not enough to specify state as the only dependency of this useEffect.\r\n     * That's why resolverRef.current is also a dependency, because it will guarantee,\r\n     * that handleSetState was called in previous render\r\n     */\r\n  }, [resolverRef.current, state]);\r\n\r\n  const handleSetState = useCallback((stateAction) => {\r\n    setState(stateAction);\r\n    return new Promise(resolve => {\r\n      resolverRef.current = resolve;\r\n    });\r\n  }, [setState])\r\n\r\n  return [state, handleSetState];\r\n};\r\n\r\nexport default {\r\n  yearRangeMin: 1920,\r\n  yearRangeMax: 2020,\r\n  defaultYearMode: \"ad\",\r\n  yearsOffset: 2,\r\n  yearHeight: 120,\r\n  spacePerEvent: 80,\r\n  yOffsetCollapsedEvents: 60,\r\n  xSpacePerCollapsedEvent: 16,\r\n  xOffsetCollapsedEvents: 20,\r\n  zoomStep: 0.7,\r\n  minZoom: 1,\r\n  maxZoomSteps: 3,\r\n  // zoomLevelsCount: 5,\r\n\r\n  generations,\r\n};\r\n","import { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Config, { Utils } from \"../config/Config\";\r\nimport Button from \"./Button\";\r\nimport Select from \"./Select\";\r\n\r\nfunction YearSelector({\r\n  onSubmit = (year) => {},\r\n  yearMode,\r\n  yearRangeMin = Config.yearRangeMin,\r\n  yearRangeMax = Config.yearRangeMax,\r\n  buttonLabel,\r\n}) {\r\n  let yearRange = [];\r\n  const [selectedYear, setSelectedYear] = useState(-1);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n\r\n  const handleChange = (e) => {\r\n    setSelectedYear(+e.target.value);\r\n  };\r\n\r\n  const handleProceed = () => {\r\n    if (selectedYear > 0) onSubmit(selectedYear);\r\n    else setErrorMsg(\"กรุณาเลือกปีเกิด\");\r\n  };\r\n\r\n  for (let i = yearRangeMin; i <= yearRangeMax; i++) {\r\n    yearRange.push(i);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Select onChange={handleChange}>\r\n        <option>เลือกปีเกิด</option>\r\n        {yearRange.reverse().map((y, i) => (\r\n          <option key={`select-${y}`} value={y}>\r\n            {Utils.typeYear(y, yearMode, true)} {y in Config.generations && `(${Config.generations[y]})`}\r\n          </option>\r\n        ))}\r\n      </Select>\r\n      {errorMsg}\r\n      <Button className=\"mt-1\" block onClick={handleProceed}>\r\n        {buttonLabel || \"ไปย้อนดูชีวิตของคุณกัน\"}\r\n      </Button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default YearSelector;\r\n","// import logo from './logo.svg';\r\nimport { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport FullScreenPage from \"../components/FullScreenPage\";\r\nimport Container from \"../components/Container\";\r\nimport Select from \"../components/Select\";\r\nimport Button from \"../components/Button\";\r\nimport YearSelector from \"../components/YearSelector\";\r\n\r\nimport Config, { Utils } from \"../config/Config\";\r\nimport Theme from \"../config/Theme\";\r\n\r\nconst Title = styled.h1`\r\n  font-size: 48px;\r\n  margin-bottom: 0;\r\n  margin-bottom: ${Theme.spacing.x2}px;\r\n`;\r\n\r\nfunction Home({ onProceed, yearMode }) {\r\n  let yearRange = [];\r\n  const [selectedYear, setSelectedYear] = useState(-1);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n\r\n  const handleChange = (e) => {\r\n    setSelectedYear(+e.target.value);\r\n  };\r\n\r\n  const handleProceed = () => {\r\n    if (selectedYear > 0) onProceed(selectedYear);\r\n    else setErrorMsg(\"กรุณาเลือกปีเกิด\");\r\n  };\r\n\r\n  for (let i = Config.yearRangeMin; i <= Config.yearRangeMax; i++) {\r\n    yearRange.push(i);\r\n  }\r\n\r\n  return (\r\n    <FullScreenPage>\r\n      <Container\r\n        fillHeight\r\n        style={{ display: \"flex\", alignItems: \"center\" }}\r\n        padding={Theme.spacing.x4}\r\n      >\r\n        <div style={{ marginBottom: \"80px\" }}>\r\n          <Title>\r\n            เด็กสมัย<u>ไหน</u>?\r\n          </Title>\r\n          <p>\r\n            เมื่อเกิดคนละปี ก็โตมาในสภาพสังคมคนละแบบ\r\n            ชวนคุณกลับไปลองดูว่าเด็กสมัยคุณเติบโตผ่านอะไรมา และเมื่อเทียบกันแล้ว\r\n            คนอื่นโตมาเหมือนหรือต่างกับคุณยังไงบ้าง\r\n          </p>\r\n          <p>คุณเกิดปี</p>\r\n          <YearSelector onSubmit={onProceed} yearMode={yearMode} />\r\n          {/* <Select onChange={handleChange}>\r\n            <option>เลือกปีเกิด</option>\r\n            {yearRange.reverse().map((y) => (\r\n              <>\r\n                <option key={y} value={y}>\r\n                  {Utils.typeYear(y, yearMode, true)}\r\n                </option>\r\n              </>\r\n            ))}\r\n          </Select>\r\n          {errorMsg}\r\n          <Button className=\"mt-2\" block onClick={handleProceed}>\r\n            ไปย้อนดูชีวิตของคุณกัน\r\n          </Button> */}\r\n        </div>\r\n      </Container>\r\n    </FullScreenPage>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import styled from \"styled-components\";\r\n\r\nconst StyledCenterBox = styled.div`\r\n  width: auto;\r\n  ${({ fillHeight }) => fillHeight && `height: 100%;`}\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nfunction CenterBox({ className, children, fillHeight }) {\r\n  return (\r\n    <StyledCenterBox className={className} fillHeight={fillHeight}>\r\n      <div>{children}</div>\r\n    </StyledCenterBox>\r\n  );\r\n}\r\n\r\nexport default CenterBox;\r\n","// import logo from './logo.svg';\r\nimport { useEffect, useState } from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\nimport FullScreenPage from \"../components/FullScreenPage\";\r\nimport Container from \"../components/Container\";\r\nimport Select from \"../components/Select\";\r\nimport CenterBox from \"../components/CenterBox\";\r\n\r\nimport Config, { Utils } from \"../config/Config\";\r\nimport Theme from \"../config/Theme\";\r\n\r\nconst blinkDelay = 3;\r\nconst blinkDuration = 2;\r\n\r\nconst IntroPage = styled(FullScreenPage)`\r\n  color: #fff;\r\n  text-align: center;\r\n\r\n  pointer-events: none;\r\n  transition: 1s opacity;\r\n  z-index: 1000;\r\n  ${({ blink }) => !blink && `opacity: 0;`}\r\n`;\r\n\r\nconst blinkTop = keyframes`\r\n  0%   { transform: translateY(0%); }\r\n  20%  { transform: translateY(-50%); }\r\n  40%  { transform: translateY(-10%); }\r\n  100% { transform: translateY(-100%); }\r\n`;\r\n\r\nconst blinkBottom = keyframes`\r\n  0%   { transform: translateY(0%); }\r\n  20%  { transform: translateY(50%); }\r\n  40%  { transform: translateY(10%); }\r\n  100% { transform: translateY(100%); }\r\n`;\r\n\r\nconst blinkText = keyframes`\r\n  0%   { opacity: 1; }\r\n  100% { opacity: 0; }\r\n`;\r\n\r\nconst IntroText = styled(CenterBox)`\r\n  color: #fff;\r\n\r\n  animation-name: ${({ blink }) => (blink ? blinkText : \"none\")};\r\n  animation-delay: ${blinkDelay}s;\r\n  animation-duration: ${blinkDuration}s;\r\n  animation-fill-mode: forwards;\r\n  transition: 0.3s all;\r\n\r\n  * {\r\n    margin: 0;\r\n    margin-bottom: ${Theme.spacing.x1}px;\r\n  }\r\n`;\r\n\r\nconst EyelidTop = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 60%;\r\n  z-index: -1;\r\n  background: linear-gradient(to bottom, #000f 90%, #0000 100%);\r\n\r\n  animation-name: ${({ blink }) => (blink ? blinkTop : \"none\")};\r\n  animation-delay: ${blinkDelay}s;\r\n  animation-duration: ${blinkDuration}s;\r\n  animation-fill-mode: forwards;\r\n  transition: 0.3s all;\r\n`;\r\n\r\nconst EyelidBottom = styled.div`\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 60%;\r\n  z-index: -1;\r\n  background: linear-gradient(to top, #000f 90%, #0000 100%);\r\n\r\n  animation-name: ${({ blink }) => (blink ? blinkBottom : \"none\")};\r\n  animation-delay: ${blinkDelay}s;\r\n  animation-duration: ${blinkDuration}s;\r\n  animation-fill-mode: forwards;\r\n  transition: 0.3s all;\r\n`;\r\n\r\nfunction Intro({\r\n  birthYear = 0,\r\n  yearMode = \"ad\",\r\n  blink = false,\r\n  onPageChange = () => {},\r\n}) {\r\n  const yearRange = [];\r\n  const [isBlinking, setBlinking] = useState(false);\r\n\r\n  useEffect(() => {\r\n    console.log(\"blink check\", blink);\r\n    if (blink) {\r\n      console.log(\"blink started\");\r\n      setBlinking(true);\r\n      setTimeout(onPageChange, (blinkDelay / 2) * 1000);\r\n      setTimeout(() => setBlinking(false), (blinkDelay + blinkDuration) * 1000);\r\n    }\r\n  }, [blink]);\r\n\r\n  return (\r\n    <IntroPage z={100} blink={isBlinking}>\r\n      <EyelidTop blink={blink} />\r\n      <EyelidBottom blink={blink} />\r\n      <IntroText fillHeight blink={blink}>\r\n        <p>นี่คือโลกในมุมมองของ</p>\r\n        <h1>\r\n          เด็กสมัย <u>{Utils.typeYear(birthYear, yearMode)}</u>\r\n        </h1>\r\n      </IntroText>\r\n    </IntroPage>\r\n  );\r\n}\r\n\r\nexport default Intro;\r\n","import styled from \"styled-components\";\r\nimport Theme from \"../config/Theme\";\r\nimport { lighten, darken } from \"polished\";\r\n\r\nconst borderWidth = 3;\r\n\r\nconst handleColorType = (type) => {\r\n  switch (type) {\r\n    case \"thailand\":\r\n      return \"#D89D3E\";\r\n    case \"world\":\r\n      return \"#6599A5\";\r\n    case \"birthyear\":\r\n      return \"#ac646a\";\r\n    default:\r\n      return \"#fff\";\r\n  }\r\n};\r\n\r\nconst EventThumbnail = styled.div`\r\n  width: 64px; //${({ collapsed }) => (collapsed ? \"24px\" : \"64px\")};\r\n  flex: 0 0 64px; //${({ collapsed }) => (collapsed ? \"24px\" : \"64px\")};\r\n  height: 64px; //${({ collapsed }) => (collapsed ? \"24px\" : \"64px\")};\r\n  ${({ collapsed }) => collapsed && `transform: scale(0.375);`}\r\n  border-radius: ${({ eventType }) =>\r\n    eventType === \"birthyear\" ? \"50%\" : \"8px\"};\r\n  box-sizing: border-box;\r\n  background-color: ${({ eventType }) =>\r\n    lighten(0.2, handleColorType(eventType))};\r\n  /* background-image: url(${({ image }) => image}); */\r\n  background-size: cover;\r\n  background-position: center center;\r\n  border: ${({ collapsed }) => borderWidth * (collapsed ? 2.5 : 1)}px solid\r\n    ${({ eventType }) => handleColorType(eventType)};\r\n  margin-right: ${Theme.spacing.x1 * 1.5}px;\r\n  position: relative;\r\n  box-shadow: 0px 2px 4px\r\n    ${({ eventType }) => darken(0.3, handleColorType(eventType))}44;\r\n\r\n  transition: 0.3s transform, 0.2s box-shadow;\r\n`;\r\n\r\nconst StyledEvent = styled.div`\r\n  display: flex;\r\n  width: calc(\r\n    min(100vw, ${Theme.containerMaxWidth}px) - ${({ x }) => x}px -\r\n      ${Theme.spacing.x1 * 6}px\r\n  );\r\n  max-width: calc(\r\n    min(100vw, ${Theme.containerMaxWidth}px) - ${({ x }) => x}px -\r\n      ${Theme.spacing.x1 * 6}px\r\n  );\r\n  height: 64px;\r\n  overflow: visible;\r\n  align-items: center;\r\n  transform: translateY(-50%);\r\n  position: ${({ relative }) => (relative ? \"relative\" : \"absolute\")};\r\n  z-index: ${({ z }) => z};\r\n\r\n  transition: 0.3s all;\r\n\r\n  &:hover {\r\n    ${EventThumbnail} {\r\n      /* transform: translateY(-2px); */\r\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\r\n    }\r\n  }\r\n  /* pointer-events: none; */\r\n`;\r\n\r\nconst EventIcon = styled.div`\r\n  position: absolute;\r\n  right: -${borderWidth}px;\r\n  bottom: -${borderWidth}px;\r\n  width: 24px;\r\n  height: 24px;\r\n  color: #fff;\r\n  font-size: 16px;\r\n\r\n  background: ${({ eventType }) => handleColorType(eventType)};\r\n  border-radius: ${({ eventType }) =>\r\n    eventType === \"birthyear\" ? \"50%\" : \"8px 0px\"};\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  /* &::after {\r\n    content: \" \";\r\n    display: block;\r\n    width: 16px;\r\n    height: 16px;\r\n    background-color: #fff;\r\n    border-radius: 50%;\r\n  } */\r\n`;\r\n\r\nconst EventDescription = styled.div``;\r\n\r\nfunction EventBubble({\r\n  title,\r\n  type = \"world\",\r\n  image,\r\n  onClick = () => {},\r\n  x,\r\n  y,\r\n  z,\r\n  relative,\r\n  collapsed = false,\r\n  onCollapsedClick = () => {},\r\n}) {\r\n  return (\r\n    <StyledEvent\r\n      onClick={(e) => {\r\n        if (!collapsed) onClick();\r\n        else onCollapsedClick(e);\r\n      }}\r\n      relative={relative}\r\n      style={{ transform: `translate(${x}px, ${y}px)` }}\r\n      z={z}\r\n      x={x}\r\n    >\r\n      <EventThumbnail\r\n        eventType={type}\r\n        style={{ backgroundImage: `url(/img/${type  == 'birthyear' ? 'celebs' : 'events'}/${image})` }}\r\n        collapsed={collapsed}\r\n      >\r\n        {!collapsed && (\r\n          <EventIcon eventType={type}>\r\n            {type == \"world\" ? (\r\n              <i className=\"fa fa-globe-americas\"></i>\r\n            ) : type == \"birthyear\" ? (\r\n              <i className=\"fa fa-baby\"></i>\r\n            ) : (\r\n              <img src=\"/img/icon_th.png\" alt=\"thailand\"/>\r\n            )}\r\n          </EventIcon>\r\n        )}\r\n      </EventThumbnail>\r\n      {!collapsed && (\r\n        <EventDescription eventType={type}>\r\n          {type == \"birthyear\" && (\r\n            <>\r\n              <small style={{ opacity: 0.7 }}>ปีเกิด</small>\r\n              <br />\r\n            </>\r\n          )}\r\n          {title}\r\n        </EventDescription>\r\n      )}\r\n    </StyledEvent>\r\n  );\r\n}\r\n\r\nexport default EventBubble;\r\n","import styled from \"styled-components\";\r\nimport Theme from \"../config/Theme\";\r\nimport Button from \"./Button\";\r\nimport { lighten, darken } from \"polished\";\r\nimport { Utils } from \"../config/Config\";\r\n\r\nconst borderWidth = 4;\r\n\r\nconst handleColorType = (type) => {\r\n  switch (type) {\r\n    case \"thailand\":\r\n      return \"#D89D3E\";\r\n    case \"world\":\r\n      return \"#6599A5\";\r\n    case \"birthyear\":\r\n      return \"#ac646a\";\r\n    default:\r\n      return \"#fff\";\r\n  }\r\n};\r\n\r\nconst FadeOverlay = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: #0008;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 500;\r\n\r\n  transition: 0.3s all;\r\n  ${({ open }) =>\r\n    !open &&\r\n    `\r\n    opacity: 0;\r\n    pointer-events: none;\r\n  `}\r\n`;\r\n\r\nconst StyledEventDialog = styled.div`\r\n  width: 320px;\r\n  max-width: calc(100% - ${Theme.spacing.x2 * 2}px);\r\n  /* align-items: center; */\r\n  /* transform: translateY(-50%); */\r\n  border-radius: 8px;\r\n  background-color: ${({ eventType }) =>\r\n    darken(0.1, handleColorType(eventType))};\r\n  box-shadow: 0px 2px 4px\r\n    ${({ eventType }) => darken(0.3, handleColorType(eventType))}44;\r\n  color: #fff;\r\n  position: relative;\r\n\r\n  transition: 0.3s all;\r\n  ${({ open }) =>\r\n    !open &&\r\n    `\r\n    opacity: 0;\r\n    transform: translateY(100px);\r\n  `}\r\n`;\r\n\r\nconst EventThumbnail = styled.div`\r\n  width: 100%;\r\n  height: 240px;\r\n  margin: auto;\r\n\r\n  border-radius: 8px;\r\n  box-sizing: border-box;\r\n  background-size: cover;\r\n  background-position: center center;\r\n\r\n  background-color: ${({ eventType }) =>\r\n    lighten(0.2, handleColorType(eventType))};\r\n  background-image: url(${({ image }) => image});\r\n  border: ${borderWidth}px solid\r\n    ${({ eventType }) => darken(0.1, handleColorType(eventType))};\r\n\r\n  position: relative;\r\n\r\n  ${({ eventType }) =>\r\n    eventType == \"birthyear\" &&\r\n    `\r\n    width: 224px;\r\n    height: 224px;\r\n    border-radius: 50%;\r\n    margin: 16px auto 0;\r\n  `}\r\n`;\r\n\r\nconst EventIcon = styled.div`\r\n  position: absolute;\r\n  right: -${borderWidth}px;\r\n  bottom: -${borderWidth}px;\r\n  /* width: 24px; */\r\n  height: 24px;\r\n  padding: 0 ${Theme.spacing.x1}px;\r\n\r\n  background: ${({ eventType }) => darken(0.1, handleColorType(eventType))};\r\n  border-radius: 8px 0px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst EventDescription = styled.div`\r\n  padding: ${Theme.spacing.x2}px;\r\n\r\n  * {\r\n    margin: 0;\r\n    margin-bottom: ${Theme.spacing.x1}px;\r\n\r\n    &:last-child {\r\n      margin-bottom: 0;\r\n    }\r\n  }\r\n\r\n  h2 {\r\n    line-height: 1.2;\r\n  }\r\n`;\r\n\r\nconst CloseButton = styled.button`\r\n  border: none;\r\n  color: #fff;\r\n  display: flex;\r\n  font-size: 24px;\r\n  line-height: 1;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: absolute;\r\n  width: 32px;\r\n  height: 32px;\r\n  right: 8px;\r\n  top: 8px;\r\n\r\n  z-index: 10;\r\n  background: rgba(51, 51, 51, 0.5);\r\n  border-radius: 16px;\r\n`;\r\n\r\nfunction EventDialog({\r\n  open,\r\n  setOpen = (open) => {},\r\n  children,\r\n  title,\r\n  data,\r\n  type = \"world\",\r\n  year,\r\n  yearMode,\r\n  birthYear,\r\n  image,\r\n  onClick = () => {},\r\n  onClose = () => {},\r\n  onBirthYearChange = (year) => {}\r\n}) {\r\n  const getTypeLabel = (type) => {\r\n    switch (type) {\r\n      case \"thailand\":\r\n        return \"เหตุการณ์สำคัญไทย\";\r\n        break;\r\n      case \"world\":\r\n        return \"เหตุการณ์สำคัญโลก\";\r\n        break;\r\n      case \"birthyear\":\r\n        return \"ปีเกิดบุคคลสำคัญ\";\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <FadeOverlay\r\n      open={open}\r\n      onClick={(e) => {\r\n        if (e.currentTarget == e.target) setOpen(false);\r\n      }}\r\n    >\r\n      <StyledEventDialog onClick={onClick} eventType={type} open={open}>\r\n        <CloseButton\r\n          onClose={onClose}\r\n          onClick={(e) => {\r\n            setOpen(false);\r\n            onClose(e);\r\n          }}\r\n        >\r\n          ×\r\n        </CloseButton>\r\n        <EventThumbnail\r\n          style={{\r\n            backgroundImage: `url(/img/${\r\n              data.type == \"birthyear\" ? \"celebs\" : \"events\"\r\n            }/${image})`,\r\n          }}\r\n          eventType={type}\r\n        >\r\n          <EventIcon eventType={type}>\r\n            {type == \"world\" ? (\r\n              <i\r\n                className=\"fa fa-globe-americas\"\r\n                style={{ marginRight: \"8px\" }}\r\n              />\r\n            ) : type == \"birthyear\" ? (\r\n              <i className=\"fa fa-baby\" style={{ marginRight: \"8px\" }} />\r\n            ) : (\r\n              <img\r\n                src=\"/img/icon_th.png\"\r\n                alt=\"thailand\"\r\n                style={{ marginRight: \"8px\" }}\r\n              />\r\n            )}\r\n            {getTypeLabel(data.type)}\r\n          </EventIcon>\r\n        </EventThumbnail>\r\n        <EventDescription eventType={type}>\r\n          <h2>{data.type == \"birthyear\" ? data.name : data.event}</h2>\r\n          <p>\r\n            {Utils.typeYear(year, yearMode, true)}{\" \"}\r\n            {data.type == \"birthyear\" &&\r\n              `- ปีนี้อายุ ${new Date().getFullYear() - year} ปี`}\r\n            <br />\r\n            {data.type != \"birthyear\" && (\r\n              <>\r\n                {year - birthYear > 0 &&\r\n                  `ตอนที่เด็กสมัย ${birthYear} มีอายุ ${year - birthYear} ปี`}\r\n                {year - birthYear < 0 &&\r\n                  `ก่อนเด็กสมัย ${birthYear} เกิด ${year - birthYear} ปี`}\r\n              </>\r\n            )}\r\n          </p>\r\n          {data.type != \"birthyear\" ? (\r\n            data.link &&\r\n            <Button as=\"a\" href={data.link} target=\"_blank\" className=\"mt-1\" block outlined style={{width: 'auto'}}>\r\n              อ่านเพิ่มเติมเกี่ยวกับเหตุการณ์นี้\r\n            </Button>\r\n          ) : (\r\n            <Button className=\"mt-1\" block outlined onClick={() => {\r\n              onBirthYearChange(data.year);\r\n              setOpen(false);\r\n            }}>\r\n              ลองมองโลกผ่านมุมมองของ \"เด็กสมัย {data.year}\"\r\n            </Button>\r\n          )}\r\n        </EventDescription>\r\n      </StyledEventDialog>\r\n    </FadeOverlay>\r\n  );\r\n}\r\n\r\nexport default EventDialog;\r\n","import styled from \"styled-components\";\r\nimport Theme from \"../config/Theme\";\r\nimport Button from \"./Button\";\r\nimport { lighten, darken } from \"polished\";\r\n\r\nconst borderWidth = 4;\r\n\r\nconst FadeOverlay = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: #0008;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 500;\r\n\r\n  transition: 0.3s all;\r\n  ${({ open }) =>\r\n    !open &&\r\n    `\r\n    opacity: 0;\r\n    pointer-events: none;\r\n  `}\r\n`;\r\n\r\nconst StyledEventDialog = styled.div`\r\n  width: calc(100% - ${Theme.spacing.x2 * 2}px);\r\n  max-width: 480px;\r\n  /* align-items: center; */\r\n  /* transform: translateY(-50%); */\r\n  border-radius: 8px;\r\n  background-color: #ece8e3;\r\n  box-shadow: 0px 2px 4px ${darken(0.3, '#ece8e3')};\r\n  color: #222;\r\n  position: relative;\r\n  padding: ${Theme.spacing.x3}px;\r\n  box-sizing: border-box;\r\n\r\n  transition: 0.3s all;\r\n  ${({ open }) =>\r\n    !open &&\r\n    `\r\n    opacity: 0;\r\n    transform: translateY(100px);\r\n  `}\r\n\r\n* {\r\n    margin: 0;\r\n    margin-bottom: ${Theme.spacing.x1}px;\r\n\r\n    &:last-child {\r\n      margin-bottom: 0;\r\n    }\r\n  }\r\n\r\n  h1, h2, h3, h4, h5, h6 {\r\n    line-height: 1.2;\r\n  }\r\n`;\r\n\r\nconst CloseButton = styled.button`\r\n  border: none;\r\n  color: #fff;\r\n  display: flex;\r\n  font-size: 24px;\r\n  line-height: 1;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: absolute;\r\n  width: 32px;\r\n  height: 32px;\r\n  right: 8px;\r\n  top: 8px;\r\n\r\n  z-index: 10;\r\n  background: rgba(51, 51, 51, 0.5);\r\n  border-radius: 16px;\r\n`;\r\n\r\nfunction Dialog({\r\n  open,\r\n  setOpen = (open) => {},\r\n  children,\r\n  onClose = () => {},\r\n}) {\r\n  return (\r\n    <FadeOverlay\r\n      open={open}\r\n      onClick={(e) => {\r\n        if ((e.currentTarget == e.target)) setOpen(false);\r\n      }}\r\n    >\r\n      <StyledEventDialog open={open}>\r\n        <CloseButton\r\n          onClose={onClose}\r\n          onClick={(e) => {\r\n            setOpen(false);\r\n            onClose(e);\r\n          }}\r\n        >\r\n          ×\r\n        </CloseButton>\r\n        {children}\r\n      </StyledEventDialog>\r\n    </FadeOverlay>\r\n  );\r\n}\r\n\r\nexport default Dialog;\r\n","import { max } from \"d3\";\r\nimport { useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Config, { Utils } from \"../config/Config\";\r\nimport Theme from \"../config/Theme\";\r\nimport EventBubble from \"./EventBubble\";\r\n\r\nconst StyledYearGroup = styled.div`\r\n  position: absolute;\r\n`;\r\n\r\nconst YearNumber = styled.div`\r\n  position: absolute;\r\n  top:32px;\r\n  left: ${Theme.spacing.x1 * 5}px;\r\n  transform: translate(-50%, -50%);\r\n  text-align: center;\r\n  padding: ${Theme.spacing.xs}px;\r\n  background-color: #DED8C9; //${({ isBorn }) => (isBorn ? \"#DED8C9\" : \"#161514\")};\r\n  transition: 0.5s all;\r\n`;\r\n\r\nconst Tick = styled.div`\r\n  position: absolute;\r\n  top: 32px;\r\n  left: ${Theme.spacing.x1 * 5}px;\r\n  transform: translate(-50%, -50%);\r\n  background-color: #333; //${({ isBorn }) => (isBorn ? \"#333\" : \"#fff\")};\r\n  height: 1px;\r\n  width: 8px;\r\n`\r\n\r\nfunction YearGroup({\r\n  year,\r\n  y,\r\n  yearMode,\r\n  birthYear,\r\n  data,\r\n  zoomLevel = 1,\r\n  className,\r\n  children,\r\n  style,\r\n  isBorn,\r\n  smoothTransition = true,\r\n  onDialogOpen = (event) => {},\r\n  onCollapsedClick = (event) => {},\r\n}) {\r\n\r\n  const maxDisplay = useMemo(() => {\r\n    return Math.floor((zoomLevel - Config.minZoom) / Config.zoomStep + 0.1) + Config.minZoom\r\n  }, [zoomLevel])\r\n\r\n  // console.log(\"events\", data.year, data);\r\n  const getBubbleYPosition = (index) =>\r\n    index < maxDisplay\r\n      ? index * Config.spacePerEvent\r\n      : Math.ceil(maxDisplay - 1) * Config.spacePerEvent + Config.yOffsetCollapsedEvents;\r\n\r\n  const getBubbleXPosition = (index) =>\r\n    index < maxDisplay\r\n      ? 0\r\n      : Math.floor(index - maxDisplay) * Config.xSpacePerCollapsedEvent;\r\n\r\n  return (\r\n    <StyledYearGroup\r\n      style={{\r\n        // ...style,\r\n        transform: `translateY(${y}px)`,\r\n        transition: smoothTransition ? \"0.3s all\" : \"none\",\r\n      }}\r\n    >\r\n      <YearNumber isBorn={isBorn}>\r\n        {Utils.typeYear(year, yearMode)}\r\n      </YearNumber>\r\n      {[...Array(Math.max(Math.floor(maxDisplay - 1), 0))].map((d, i) => \r\n        <Tick \r\n          isBorn={isBorn}\r\n          key={i}\r\n          style={{\r\n            // ...style,\r\n            transform: `translate(-50%, ${Config.spacePerEvent * (i + 1)}px)`,\r\n          }}/>\r\n      )}\r\n      {/* | {+year - +birthYear} ปี */}\r\n      {data.events.map((event, index) => (\r\n        <EventBubble\r\n          y={getBubbleYPosition(index)}\r\n          x={Theme.bubbleXOffset + getBubbleXPosition(index)}\r\n          title={event.type == \"birthyear\" ? event.name : event.event}\r\n          type={event.type}\r\n          image={event.image}\r\n          collapsed={index >= maxDisplay}\r\n          z={10 - index}\r\n          key={year + \"-\" + index}\r\n          onClick={() => onDialogOpen(event)}\r\n          onCollapsedClick={(e)=> onCollapsedClick(e, event)}\r\n        />\r\n      ))}\r\n    </StyledYearGroup>\r\n  );\r\n}\r\n\r\nexport default YearGroup;\r\n","export default __webpack_public_path__ + \"static/media/events.384cfac5.csv\";","export default __webpack_public_path__ + \"static/media/celebrities.830a867e.csv\";","export default __webpack_public_path__ + \"static/media/life.91f8f7a1.csv\";","import { useEffect, useState, useRef, useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Container from \"../components/Container\";\r\nimport Button from \"../components/Button\";\r\nimport YearGroup from \"../components/YearGroup\";\r\n\r\nimport Config, { Utils, useStateWithPromise } from \"../config/Config\";\r\nimport Theme from \"../config/Theme\";\r\n\r\nimport * as d3 from \"d3\";\r\nimport * as d3Collection from \"d3-collection\";\r\nimport * as d3Scale from \"d3-scale\";\r\n\r\nimport clone from \"clone\";\r\n\r\nimport eventsData from \"../data/events.csv\";\r\nimport celebsData from \"../data/celebrities.csv\";\r\nimport lifeData from \"../data/life.csv\";\r\n\r\nimport { zoom } from \"d3\";\r\n\r\nimport { usePinch, useDrag } from \"react-use-gesture\";\r\n\r\nconst TimelineContainer = styled(Container)`\r\n  color: #333; //${({ isBorn }) => (isBorn ? \"#333\" : \"#fff\")};;\r\n  transition: 0.5s all;\r\n\r\n  background-color: #ded8c9;\r\n\r\n  &::before {\r\n    content: \" \";\r\n    background-color: #ded8c9; //${({ isBorn }) =>\r\n      isBorn ? \"#DED8C9\" : \"#161514\"};\r\n    color: #333; //${({ isBorn }) => (isBorn ? \"#333\" : \"#fff\")};\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    pointer-events: none;\r\n    z-index: 0;\r\n    transition: 0.5s all;\r\n  }\r\n\r\n  &::after {\r\n    content: \" \";\r\n    background: radial-gradient(\r\n      100% 60% at 50% 45%,\r\n      rgba(85, 80, 72, 0) 30%,\r\n      rgba(85, 80, 72, 0.57) 85%,\r\n      rgba(85, 80, 72, 0.75) 100%\r\n    );\r\n    /* background: \r\n    ${({ isBorn }) =>\r\n      isBorn\r\n        ? `radial-gradient(\r\n        100% 60% at 50% 45%, \r\n        rgba(85, 80, 72, 0) 30%, \r\n        rgba(85, 80, 72, 0.57) 85%, \r\n        rgba(85, 80, 72, 0.75) 100%\r\n      );`\r\n        : `radial-gradient(\r\n        100% 60% at 50% 45%, \r\n        rgba(0, 0, 0, 0) 30%, \r\n        rgba(0, 0, 0, 0.57) 85%, \r\n        rgba(0, 0, 0, 0.75) 100%\r\n      );`} */\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    pointer-events: none;\r\n    z-index: 0;\r\n\r\n    transition: 0.5s all;\r\n  }\r\n`;\r\n\r\nconst ZoomControls = styled.div`\r\n  position: fixed;\r\n  /* right: ${Theme.spacing.x2}px; */\r\n  right: max(${Theme.spacing.x2}px, (100vw - ${Theme.containerMaxWidth}px) / 2);\r\n  bottom: 80px;\r\n  display: flex;\r\n  gap: 8px;\r\n  flex-direction: column;\r\n  z-index: 110;\r\n\r\n  ${Button} {\r\n    font-size: 18px;\r\n    width: 36px;\r\n    height: 36px;\r\n    border-radius: 50%;\r\n    display: flex;\r\n    padding: 0;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: #ece8e3;\r\n    color: #333;\r\n    /* border: 1px solid #DED8C9; */\r\n  }\r\n`;\r\n\r\nconst EndPrompt = styled.div`\r\n  position: absolute;\r\n  /* left: 100px; */\r\n  width: calc(\r\n    min(100vw, ${Theme.containerMaxWidth}px) - ${({ x }) => x}px -\r\n      ${Theme.spacing.x1 * 6}px\r\n  );\r\n  background-color: #ece8e3;\r\n  padding: ${Theme.spacing.x2}px;\r\n  border-radius: ${Theme.spacing.xs}px;\r\n  box-sizing: border-box;\r\n  z-index: 100;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\r\n`;\r\n\r\nconst TimelineLine = styled.div`\r\n  position: absolute;\r\n  left: ${Theme.spacing.x2 + Theme.spacing.x1 * 5}px;\r\n  height: 100%;\r\n  width: 1px;\r\n\r\n  background-color: #333; //${({ isBorn }) => (isBorn ? \"#333\" : \"#fff\")};\r\n`;\r\n\r\nconst zoomExtent = [\r\n  Config.minZoom,\r\n  Config.minZoom + Config.maxZoomSteps * Config.zoomStep,\r\n];\r\n\r\nconst yearStartDisplay = Config.yearRangeMin - Config.yearsOffset;\r\nconst yearEndDisplay = Config.yearRangeMax + Config.yearsOffset;\r\n\r\nconst yearSpan = Config.yearRangeMax - Config.yearRangeMin;\r\nconst yearSpanToDisplay = yearSpan + 2 * Config.yearsOffset;\r\nconst timelineMinLength = yearSpanToDisplay * Config.yearHeight;\r\nconst timelineMaxLength = timelineMinLength * zoomExtent[1];\r\n\r\nconst maxZoomOffset = timelineMaxLength - timelineMinLength;\r\nconst maxContainerHeight = timelineMaxLength * 2 - timelineMinLength;\r\n\r\nconst scaleY = d3Scale\r\n  .scaleLinear()\r\n  .domain([yearStartDisplay, yearEndDisplay])\r\n  .range([maxZoomOffset, maxZoomOffset + timelineMinLength]);\r\n\r\nfunction TimelineContent({\r\n  birthYear,\r\n  yearMode,\r\n  // onYearChange = (year) => {},\r\n  openDialog = (event) => {},\r\n  onScroll = (event) => {},\r\n  onClick = (event) => {},\r\n  onWheel = (event) => {},\r\n  onTouchStart = (event) => {},\r\n  setOpenYearChange = () => {},\r\n  refLineYOffset = 0,\r\n}) {\r\n  // const [openYearChange, setOpenYearChange] = useState(false);\r\n  const [eventsNested, _setEventsNested] = useStateWithPromise([]);\r\n\r\n  const [transform, setTransform] = useStateWithPromise(d3.zoomIdentity);\r\n  const [transformedScaleY, setTransformedScaleY] = useStateWithPromise(\r\n    () => scaleY\r\n  );\r\n  // const transformedScaleY = useMemo(() => transform.rescaleY(scaleY), [transform]);\r\n  // const [smoothTransition, setSmoothTransition] = useStateWithPromise(true);\r\n  // const [isNormalizingTransform, setNormalizingTransform] = useStateWithPromise(\r\n  //   false\r\n  // );\r\n\r\n  const [yearAtRefLine, setYearAtRefLine] = useState(0);\r\n\r\n  const scrollRangeYear = useMemo(() => {\r\n    return [birthYear - Config.yearsOffset, yearEndDisplay];\r\n  }, [birthYear]);\r\n\r\n  // const [lastDy, setLastDy] = useState(null);\r\n\r\n  const scrollRange = useMemo(() => {\r\n    let x = [\r\n      transformedScaleY(scrollRangeYear[0]) - refLineYOffset,\r\n      transformedScaleY(scrollRangeYear[1]) - refLineYOffset,\r\n    ];\r\n    return x;\r\n  }, [transformedScaleY, scrollRangeYear]);\r\n\r\n  const [currentScrollListener, setCurrentScrollListener] = useState(null);\r\n\r\n  // const refLineEl = useRef(null);\r\n  const timelineRef = useRef(null);\r\n\r\n  const eventsNestedFiltered = useMemo(() => {\r\n    return eventsNested.filter((e) => e.year >= birthYear);\r\n  }, [eventsNested, birthYear]);\r\n\r\n  const endPromptY = useMemo(() => {\r\n    return transformedScaleY(Config.yearRangeMax + 1)\r\n  }, [transformedScaleY]);\r\n\r\n  // const pinchBind = usePinch(\r\n  //   (state) => {\r\n  //     console.log(state);\r\n  //     let d = state.da[0];\r\n  //     let delta = state.delta[0] + state.delta[1];\r\n  //     const scrollOffset =\r\n  //       document.body.scrollTop || document.documentElement.scrollTop;\r\n  //     let c = state.origin[0] + scrollOffset;\r\n  //     console.log(state.origin);\r\n  //     zoom(delta / d, c);\r\n  //   },\r\n  //   {\r\n  //     domTarget: timelineRef,\r\n  //     // filterTaps: false,\r\n  //     eventOptions: {\r\n  //       passive: false,\r\n  //       capture: true,\r\n  //     },\r\n  //   }\r\n  // );\r\n\r\n  // useEffect(pinchBind, [pinchBind])\r\n\r\n  const preprocessData = (events, celebrities) => {\r\n    let eventsNestedTemp = d3Collection\r\n      .nest()\r\n      .key((d) => d.year)\r\n      .entries(events)\r\n      .map((d) => ({\r\n        year: d.key,\r\n        events: d.values,\r\n      }));\r\n\r\n    eventsNestedTemp.forEach((d) => {\r\n      d.events.sort((x, y) => x.importance - y.importance);\r\n      d.celebrities = [];\r\n    });\r\n\r\n    // for (let i in eventsNestedTemp) {\r\n    //   let x = -1;\r\n    //   for (let j in celebrities) {\r\n    //     if (+celebrities[j].year == +eventsNestedTemp[i].year) {\r\n    //       celebrities[j].type = \"birthyear\";\r\n    //       eventsNestedTemp[i].events.push(celebrities[j]);\r\n    //     }\r\n    //   }\r\n    // }\r\n\r\n    let yearList = eventsNestedTemp.map((g) => g.year);\r\n    for (let yr = Config.yearRangeMin; yr <= Config.yearRangeMax; yr++) {\r\n      if (!yearList.includes(yr)) {\r\n        eventsNestedTemp.push({\r\n          year: yr,\r\n          events: [],\r\n        });\r\n      }\r\n    }\r\n\r\n    eventsNestedTemp.sort((a, b) => a.year - b.year);\r\n    return eventsNestedTemp;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (currentScrollListener)\r\n      window.removeEventListener(\"scroll\", currentScrollListener);\r\n\r\n    const handleScroll = (e) => {\r\n      const scrollOffset =\r\n        document.body.scrollTop || document.documentElement.scrollTop;\r\n      // console.log(scrollRange, transform);\r\n      if (scrollOffset < scrollRange[0]) {\r\n        console.log(\"too low\");\r\n        e.preventDefault();\r\n        window.scrollTo(0, scrollRange[0]);\r\n      }\r\n      if (scrollOffset > scrollRange[1]) {\r\n        console.log(\"too high\");\r\n        e.preventDefault();\r\n        window.scrollTo(0, scrollRange[1]);\r\n      }\r\n\r\n      // console.log(transformedScaleY.invert(scrollOffset))\r\n      let scrollTop = document.documentElement.scrollTop;\r\n      let offsetY = scrollTop + refLineYOffset;\r\n      setYearAtRefLine(Math.floor(transformedScaleY.invert(offsetY)));\r\n      onScroll({\r\n        event: e,\r\n        currentYear: Math.floor(transformedScaleY.invert(offsetY)),\r\n      });\r\n    };\r\n    setCurrentScrollListener(() => handleScroll);\r\n    window.addEventListener(\"scroll\", handleScroll, { passive: false });\r\n  }, [scrollRange]);\r\n\r\n  const setEventsNested = (newEventsNested) => {\r\n    return new Promise((resolve) => {\r\n      let eventsNestedTemp = clone(newEventsNested);\r\n      eventsNestedTemp.forEach((e) => {\r\n        e.y = transformedScaleY(e.year);\r\n      });\r\n      _setEventsNested(eventsNestedTemp).then(resolve);\r\n    });\r\n  };\r\n\r\n  // const openDialog = (event) => {\r\n  //   setDialogData(event);\r\n  //   setDialogOpen(true);\r\n  // };\r\n\r\n  const zoomAt = (t, y, k) => {\r\n    let yOnCurrentZoom = t.invert([0, y])[1];\r\n    let tNew = t\r\n      .translate(0, yOnCurrentZoom)\r\n      .scale(k)\r\n      .translate(0, -yOnCurrentZoom);\r\n    return tNew;\r\n  };\r\n\r\n  const zoom = (dz, centerY = null) => {\r\n    console.log(dz, centerY);\r\n\r\n    let tempZoomLevel = Utils.Clamp(\r\n      transform.k + dz,\r\n      zoomExtent[0],\r\n      zoomExtent[1]\r\n    );\r\n    // let k = Utils.Clamp(transform.k * dy / lastDy, 1, 5);\r\n    let zoomCenterY = 0;\r\n    if (centerY === null) {\r\n      let scrollTop = document.documentElement.scrollTop;\r\n      zoomCenterY = scrollTop + refLineYOffset;\r\n    } else {\r\n      zoomCenterY = centerY;\r\n    }\r\n\r\n    let tempTransform = zoomAt(\r\n      transform,\r\n      zoomCenterY,\r\n      tempZoomLevel / transform.k\r\n    );\r\n    let tempScaleY = tempTransform.rescaleY(scaleY);\r\n\r\n    // console.log('t', tempTransform);\r\n    setTransform(tempTransform);\r\n    setTransformedScaleY(() => tempScaleY);\r\n  };\r\n\r\n  const resetView = () => {\r\n    let tempTransform = d3.zoomIdentity;\r\n    let tempScaleY = tempTransform.rescaleY(scaleY);\r\n\r\n    Promise.all([\r\n      setTransform(tempTransform),\r\n      setTransformedScaleY(() => tempScaleY),\r\n    ]).then(() => {\r\n      scrollToYear(birthYear);\r\n    });\r\n  };\r\n\r\n  const scrollToYear = (year, scale) => {\r\n    let scaledYear = scale ? scale(year) : transformedScaleY(year);\r\n    let scrollY = scaledYear - refLineYOffset + 32;\r\n    // console.log(scaledYear, refLineYOffset);\r\n    window.scrollTo({ top: scrollY, behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setEventsNested(eventsNested);\r\n  }, [transformedScaleY]);\r\n\r\n  useEffect(() => {\r\n    Promise.all([\r\n      d3.csv(eventsData),\r\n      d3.csv(lifeData),\r\n      d3.csv(celebsData),\r\n    ]).then((files) => {\r\n      console.log(\"fileloaded\");\r\n      let events = files[0];\r\n      let life = files[1];\r\n      let celebrities = files[2];\r\n\r\n      let eventsNestedTemp = preprocessData(events, celebrities);\r\n      setEventsNested(eventsNestedTemp).then(() => scrollToYear(birthYear));\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    scrollToYear(birthYear);\r\n  }, [birthYear]);\r\n\r\n  return (\r\n    <TimelineContainer\r\n      isBorn={yearAtRefLine >= birthYear}\r\n      style={{\r\n        height: `${maxContainerHeight}px`,\r\n        position: \"relative\",\r\n      }}\r\n      ref={timelineRef}\r\n      onClick={onClick}\r\n      onTouchStart={onTouchStart}\r\n      onWheel={onWheel}\r\n    >\r\n      <TimelineLine isBorn={yearAtRefLine >= birthYear} />\r\n      {eventsNestedFiltered.map((eventGroup, i) => (\r\n        <YearGroup\r\n          year={eventGroup.year}\r\n          data={eventGroup}\r\n          yearMode={yearMode}\r\n          isBorn={yearAtRefLine >= birthYear}\r\n          birthYear={birthYear}\r\n          y={eventGroup.y}\r\n          onDialogOpen={openDialog}\r\n          zoomLevel={transform.k}\r\n          // smoothTransition={!isNormalizingTransform}\r\n          key={`item${i}`}\r\n          onCollapsedClick={(e) => zoom(Config.zoomStep, e.pageY)}\r\n        />\r\n      ))}\r\n\r\n      <EndPrompt \r\n        style={{ transform: `translate(${Theme.bubbleXOffset}px, ${endPromptY}px)` }}\r\n        x={Theme.bubbleXOffset}>\r\n        <p style={{ marginBottom: Theme.spacing.x1 }}>ลองดูของคนอื่น</p>\r\n        <Button onClick={() => setOpenYearChange(true)}>เปลี่ยนปีเกิด</Button>\r\n      </EndPrompt>\r\n\r\n      <ZoomControls>\r\n        <Button onClick={() => zoom(Config.zoomStep)}>\r\n          <i className=\"fa fa-search-plus\" />\r\n        </Button>\r\n        <Button onClick={() => zoom(-Config.zoomStep)}>\r\n          <i className=\"fa fa-search-minus\" />\r\n        </Button>\r\n        <Button onClick={resetView}>\r\n          <i className=\"fa fa-undo-alt\" />\r\n        </Button>\r\n      </ZoomControls>\r\n    </TimelineContainer>\r\n  );\r\n}\r\n\r\nexport default TimelineContent;\r\n","import { useEffect, useState, useRef, useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Container from \"../components/Container\";\r\nimport Button from \"../components/Button\";\r\nimport EventBubble from \"../components/EventBubble\";\r\nimport EventDialog from \"../components/EventDialog\";\r\nimport YearSelector from \"../components/YearSelector\";\r\nimport Dialog from \"../components/Dialog\";\r\nimport YearGroup from \"../components/YearGroup\";\r\nimport TimelineContent from \"./TimelineContent\";\r\n\r\nimport Config, { Utils, useStateWithPromise } from \"../config/Config\";\r\nimport Theme from \"../config/Theme\";\r\n\r\nimport * as d3 from \"d3\";\r\nimport * as d3Collection from \"d3-collection\";\r\nimport * as d3Scale from \"d3-scale\";\r\n\r\nimport clone from \"clone\";\r\n\r\nimport eventsData from \"../data/events.csv\";\r\nimport celebsData from \"../data/celebrities.csv\";\r\nimport lifeData from \"../data/life.csv\";\r\n\r\nimport { zoom } from \"d3\";\r\n\r\nimport { usePinch, useDrag } from \"react-use-gesture\";\r\n\r\nconst Banner = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  /* right: ${Theme.spacing.x2}px; */\r\n  padding: ${Theme.spacing.x2}px;\r\n\r\n  text-align: right;\r\n  background: #ece8e3;\r\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.15);\r\n  border-radius: 0px 0px 8px 8px;\r\n  z-index: 190;\r\n  color: #333;\r\n\r\n  /* right: calc(\r\n    max(\r\n      (100vw - ${Theme.containerMaxWidth}px) / 2, \r\n      0px) + ${Theme.spacing.x2}px); */\r\n\r\n  right: max(\r\n    ${Theme.spacing.x2}px,\r\n    (100vw - ${Theme.containerMaxWidth}px) / 2 - 120px\r\n  );\r\n\r\n  h1 {\r\n    margin: 0;\r\n    line-height: 1.2;\r\n    margin-bottom: ${Theme.spacing.x1}px;\r\n  }\r\n`;\r\n\r\nconst ZoomControls = styled.div`\r\n  position: fixed;\r\n  right: ${Theme.spacing.x2}px;\r\n  bottom: 80px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  z-index: 1;\r\n\r\n  ${Button} {\r\n    font-size: 1.2em;\r\n  }\r\n`;\r\n\r\nconst RefLineContainer = styled.div`\r\n  width: 100%;\r\n  position: fixed;\r\n  top: 50vh;\r\n  z-index: 100;\r\n`;\r\n\r\nconst RefLine = styled.div`\r\n  width: 100%;\r\n  height: 4px;\r\n  background-color: #f005;\r\n  position: fixed;\r\n  top: 50vh;\r\n  pointer-events: none;\r\n`;\r\n\r\nconst AgeBox = styled.div`\r\n  position: absolute;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: ${Theme.spacing.x1 * 9}px;\r\n  /* height: ${Theme.spacing.x1 * 8}px; */\r\n  white-space: nowrap;\r\n  top: 0;\r\n  left: ${Theme.spacing.x2}px;\r\n  /* padding: 4px 8px; */\r\n  background-color: #e4dfd3; //${({ isBorn }) =>\r\n    isBorn ? \"#e4dfd3\" : \"#2c2b28\"};\r\n  color: #333; //${({ isBorn }) => (isBorn ? \"#333\" : \"#fff\")};\r\n  border: ${Theme.spacing.xs}px solid #f005;\r\n  border-radius: ${Theme.spacing.x1 * 2}px;\r\n  /* border-radius: 50%; */\r\n  transform: translateY(-50%);\r\n  transition: 0.5s all;\r\n\r\n  transition: 0.5s all, 0.2s transform, 0.2s box-shadow;\r\n\r\n  cursor: pointer;\r\n\r\n  &:hover {\r\n    transform: translateY(calc(-50% - 2px));\r\n    box-shadow: 0px 2px 4px rgba(81, 17, 21, 0.5);\r\n  }\r\n  /* width: 50px; */\r\n`;\r\n\r\nconst AgeIcon = styled.div`\r\n  text-align: center;\r\n  background-color: #f005;\r\n  border-top-right-radius: ${Theme.spacing.x1 * 1.5}px;\r\n  border-top-left-radius: ${Theme.spacing.x1 * 1.5}px;\r\n  padding: ${Theme.spacing.xs}px;\r\n  margin-top: ${Theme.spacing.xs}px;\r\n  color: #fff;\r\n`;\r\n\r\nconst Age = styled.div`\r\n  font-weight: bold;\r\n  font-size: ${20 * 1.25}px;\r\n  margin-top: -4px;\r\n  width: 100%;\r\n  text-align: center;\r\n`;\r\n\r\nconst AgeInfo = styled.div`\r\n  position: absolute;\r\n  /* top: -100%; */\r\n  top: -28px;\r\n  height: 24px;\r\n  padding: 0 8px;\r\n  background-color: #ddd7c8; //${({ isBorn }) =>\r\n    isBorn ? \"#DDD7C8\" : \"#161514\"};\r\n  border-radius: 4px;\r\n`;\r\n\r\nconst TimelineLine = styled.div`\r\n  position: absolute;\r\n  left: ${Theme.spacing.x2 + Theme.spacing.x1 * 4.5}px;\r\n  height: 100%;\r\n  width: 1px;\r\n\r\n  background-color: #333; //${({ isBorn }) => (isBorn ? \"#333\" : \"#fff\")};\r\n`;\r\n\r\nconst zoomExtent = [\r\n  Config.minZoom,\r\n  Config.minZoom + Config.maxZoomSteps * Config.zoomStep,\r\n];\r\n\r\nconst yearStartDisplay = Config.yearRangeMin - Config.yearsOffset;\r\nconst yearEndDisplay = Config.yearRangeMax + Config.yearsOffset;\r\n\r\nconst yearSpan = Config.yearRangeMax - Config.yearRangeMin;\r\nconst yearSpanToDisplay = yearSpan + 2 * Config.yearsOffset;\r\nconst timelineMinLength = yearSpanToDisplay * Config.yearHeight;\r\nconst timelineMaxLength = timelineMinLength * zoomExtent[1];\r\n\r\nconst maxZoomOffset = timelineMaxLength - timelineMinLength;\r\nconst maxContainerHeight = timelineMaxLength * 2 - timelineMinLength;\r\n\r\nconst scaleY = d3Scale\r\n  .scaleLinear()\r\n  .domain([yearStartDisplay, yearEndDisplay])\r\n  .range([maxZoomOffset, maxZoomOffset + timelineMinLength]);\r\n\r\nfunction Timeline({\r\n  birthYear,\r\n  setBirthYear = (year) => {},\r\n  yearMode,\r\n  onYearChange = (year) => {},\r\n  onScroll = (event) => {},\r\n  onTouchStart = (event) => {},\r\n  onWheel = (event) => {},\r\n}) {\r\n  const [isDialogOpen, setDialogOpen] = useState(false);\r\n\r\n  const [dialogData, setDialogData] = useState({});\r\n  const [openYearChange, setOpenYearChange] = useState(false);\r\n\r\n  const [yearAtRefLine, setYearAtRefLine] = useState(0);\r\n\r\n  const refLineEl = useRef(null);\r\n\r\n  const handleYearChange = (year) => {\r\n    setOpenYearChange(false);\r\n    setDialogOpen(false);\r\n    onYearChange(year);\r\n    // scrollToYear(year);\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleYearChange(birthYear);\r\n  }, [birthYear]);\r\n\r\n  const openDialog = (event) => {\r\n    setDialogData(event);\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  const updateScrollPosition = (e) => {\r\n    setYearAtRefLine(e.currentYear);\r\n    onScroll(e);\r\n  };\r\n\r\n  const refLineYOffset = useMemo(() => {\r\n    return window.innerHeight / 2;\r\n  }, []);\r\n\r\n  const iconAtAge = useMemo(() => {\r\n    const age = Math.min(Config.yearRangeMax, yearAtRefLine) - birthYear;\r\n    if (age < 6) return \"fas fa-baby\";\r\n    if (age < 12) return \"fas fa-child\";\r\n    if (age < 22) return \"fas fa-pencil-ruler\";\r\n    if (age < 28) return \"fas fa-user-graduate\";\r\n    if (age < 40) return \"fas fa-briefcase\";\r\n    if (age < 60) return \"fas fa-briefcase\";\r\n    else return \"fas fa-hiking\";\r\n  }, [yearAtRefLine]);\r\n\r\n  return (\r\n    <>\r\n      <RefLineContainer>\r\n        <RefLine ref={refLineEl}></RefLine>\r\n        <Container style={{ position: \"relative\" }}>\r\n          <AgeBox isBorn={yearAtRefLine >= birthYear}>\r\n            {yearAtRefLine > birthYear ? (\r\n              <>\r\n                <AgeInfo isBorn={yearAtRefLine >= birthYear}>อายุ</AgeInfo>\r\n                <Age>\r\n                  <AgeIcon>\r\n                    <i className={iconAtAge} />\r\n                  </AgeIcon>\r\n                  {Math.min(Config.yearRangeMax, yearAtRefLine) - birthYear}{\" \"}\r\n                  {Math.min(Config.yearRangeMax, yearAtRefLine) - birthYear >=\r\n                  10\r\n                    ? \"ปี\"\r\n                    : \"ขวบ\"}\r\n                </Age>\r\n              </>\r\n            ) : (\r\n              <>ปีแรกเกิด</>\r\n            )}\r\n          </AgeBox>\r\n        </Container>\r\n      </RefLineContainer>\r\n      <Banner>\r\n        <h1 style={{ marginBottom: \"0\" }}>\r\n          <div style={{ fontSize: \"21px\" }}>โลกในมุมมอง</div>\r\n          <div style={{ fontSize: \"28px\" }}>\r\n            เด็กสมัย <u>{Utils.typeYear(birthYear, yearMode)}</u>\r\n          </div>\r\n        </h1>\r\n        <p style={{ marginBottom: Theme.spacing.x1 }}>\r\n          (ปัจจุบันอายุ {new Date().getFullYear() - birthYear} ปี)\r\n        </p>\r\n        <Button onClick={() => setOpenYearChange(true)}>เปลี่ยนปีเกิด</Button>\r\n      </Banner>\r\n      <TimelineContent\r\n        birthYear={birthYear}\r\n        yearMode={yearMode}\r\n        refLineYOffset={refLineYOffset}\r\n        openDialog={openDialog}\r\n        onScroll={updateScrollPosition}\r\n        onWheel={onWheel}\r\n        onTouchStart={onTouchStart}\r\n        setOpenYearChange={setOpenYearChange}\r\n        // onYearChange={() => setOpenYearChange(true)}\r\n      />\r\n      <EventDialog\r\n        open={isDialogOpen}\r\n        setOpen={setDialogOpen}\r\n        data={dialogData}\r\n        title={\r\n          dialogData.type == \"birthyear\" ? dialogData.name : dialogData.event\r\n        }\r\n        year={dialogData.year}\r\n        yearMode={yearMode}\r\n        birthYear={birthYear}\r\n        image={dialogData.image}\r\n        type={dialogData.type}\r\n        onBirthYearChange={onYearChange}\r\n      />\r\n\r\n      <Dialog open={openYearChange} setOpen={setOpenYearChange}>\r\n        <h2>เปลี่ยนปีเกิด</h2>\r\n        <YearSelector onSubmit={setBirthYear} yearMode={yearMode} />\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Timeline;\r\n","import styled from \"styled-components\";\r\nimport Theme from \"../config/Theme\";\r\nimport Container from \"./Container\";\r\n\r\nconst StyledMenuBar = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  height: 80px;\r\n  background: linear-gradient(180deg, #38353100 0%, #383531ff 100%);\r\n  z-index: 200;\r\n`;\r\n\r\nconst MenuItem = styled.div`\r\n  padding-bottom: ${Theme.spacing.x2}px;\r\n  color: #fff;\r\n  margin-right: ${Theme.spacing.x2}px;\r\n  cursor: pointer;\r\n\r\n  &:last-child {\r\n    margin-right: 0;\r\n  }\r\n\r\n  a:link, a:visited {\r\n    color: #fff;\r\n  }\r\n\r\n  a.active {\r\n    opacity: 0.7;\r\n    font-weight: bold;\r\n    text-decoration: none;\r\n  }\r\n\r\n  &:hover {\r\n    ${({toggle}) => !toggle && `text-decoration: underline;`}\r\n  }\r\n`;\r\n\r\nfunction MenuBar({\r\n  mode = \"home\",\r\n  yearMode,\r\n  onYearModeChange = (mode) => {},\r\n  onOpenAbout = () => {},\r\n  onHome = () => {},\r\n  onToggleLegend = () => {}\r\n}) {\r\n  const handleYearMode = (e, mode) => {\r\n    e.preventDefault();\r\n    console.log('!!!!!')\r\n    onYearModeChange(mode);\r\n  };\r\n\r\n  return (\r\n    <StyledMenuBar>\r\n      <Container fillHeight style={{ display: \"flex\", alignItems: \"flex-end\" }}>\r\n        {mode != \"home\" && (\r\n          <>\r\n            <MenuItem onClick={onHome}><i className=\"fa fa-home\" /></MenuItem>\r\n          </>\r\n        )}\r\n        <MenuItem toggle>\r\n          <a\r\n            href=\"#\"\r\n            onClick={(e) => {\r\n              handleYearMode(e, \"be\");\r\n            }}\r\n            className={yearMode == 'be' ? 'active' : ''}\r\n          >\r\n            พ.ศ.\r\n          </a>{\" \"}\r\n          |{\" \"}\r\n          <a\r\n            href=\"#\"\r\n            onClick={(e) => {\r\n              handleYearMode(e, \"ad\");\r\n            }}\r\n            className={yearMode == 'ad' ? 'active' : ''}\r\n          >\r\n            ค.ศ.\r\n          </a>\r\n        </MenuItem>\r\n        <div style={{ flexGrow: 1 }}></div>\r\n        {mode != \"home\" && (\r\n          <>\r\n            <MenuItem>วิธีเล่น</MenuItem>\r\n            <MenuItem onClick={onToggleLegend}>สัญลักษณ์</MenuItem>\r\n          </>\r\n        )}\r\n        <MenuItem onClick={onOpenAbout}>About</MenuItem>\r\n      </Container>\r\n    </StyledMenuBar>\r\n  );\r\n}\r\n\r\nexport default MenuBar;\r\n","// import logo from './logo.svg';\nimport { useState } from \"react\";\nimport GlobalStyle from \"./GlobalStyle\";\nimport styled, { keyframes } from \"styled-components\";\nimport \"./App.css\";\n\nimport Home from \"./pages/Home\";\nimport Intro from \"./pages/Intro\";\nimport Timeline from \"./pages/Timeline\";\nimport MenuBar from \"./components/MenuBar\";\nimport Dialog from \"./components/Dialog\";\nimport Theme from \"./config/Theme\";\n\nconst handleColorType = (type) => {\n  switch (type) {\n    case \"thailand\":\n      return \"#D89D3E\";\n    case \"world\":\n      return \"#6599A5\";\n    case \"birthyear\":\n      return \"#ac646a\";\n    default:\n      return \"#fff\";\n  }\n};\n\nconst BottomDrawer = styled.div`\n  position: fixed;\n  /* bottom: -100%; */\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%) translateY(${({open}) => open ? '0' : '100%'});\n  height: 200px;\n  width: 100%;\n  max-width: ${Theme.containerMaxWidth}px;\n  border-top-left-radius: 16px;\n  border-top-right-radius: 16px;\n  z-index: 200;\n  display: flex;\n  gap: 64px;\n  padding: 16px;\n  background-color: #000c;\n  color: #ffffff;\n  box-sizing: border-box;\n\n  transition: 0.3s all;\n`;\n\nconst LegendIcon = styled.div`\n  display: inline-flex;\n  width: 24px;\n  height: 24px;\n  background-color: #888;\n  justify-content: center;\n  align-items: center;\n  font-size: 16px;\n  border-radius: 4px;\n  margin-right: 8px;\n`\n\nconst Tutorial = styled.div`\n  position: fixed;\n  bottom: 200px;\n  /* margin: auto; */\n  left: 50%;\n  z-index: 100;\n  pointer-events: none;\n\n  transition: 0.3s all;\n\n  opacity: ${({show}) => show ? 1 : 0};\n  /* right: 0; */\n`\n\nconst verticalSwipe = keyframes`\n  0%  { opacity: 0;  transform: translateY(-40px); }\n  10% { opacity: 1;  transform: translateY(-40px); }\n  15% { opacity: 1;  transform: translateY(-40px); }\n  30% { opacity: 0.3;  transform: translateY( 40px); }\n  40% { opacity: 0;  transform: translateY( 40px); }\n  50% { opacity: 0;  transform: translateY( 40px); }\n  60% { opacity: 1;  transform: translateY( 40px); }\n  65% { opacity: 1;  transform: translateY( 40px); }\n  80% { opacity: 0.3;  transform: translateY(-40px); }\n  90% { opacity: 0;  transform: translateY(-40px); }\n  100%{ opacity: 0;  transform: translateY(-40px); }\n`;\n\nconst ScrollAnimation = styled.div`\n  position: absolute;\n  width: 32px;\n  height: 32px;\n  margin-left: -16px;\n  border-radius: 50%;\n  background-color: #fffc;\n  border: 2px solid #fffc;\n  animation: ${verticalSwipe} 2.5s infinite;\n`\n\nfunction App() {\n  const [appMode, setAppMode] = useState(\"home\");\n  const [yearMode, setYearMode] = useState(\"ad\");\n  const [birthYear, setBirthYear] = useState(1995);\n  const [isTransitioning, setTransitioning] = useState(false);\n  const [openAbout, setOpenAbout] = useState(false);\n  const [openLegend, setOpenLegend] = useState(false);\n  const [touchInitiated, setTouchInitiated] = useState(false);\n\n  const startTimeline = (year) => {\n    console.log(\"start transtiion\");\n    setBirthYear(year);\n    setTransitioning(false);\n    setTimeout(() => {\n      setTransitioning(true);\n    }, 100);\n  };\n\n  const onPageChange = (page) => {\n    console.log(\"pagechange\");\n    setAppMode(page);\n  };\n\n  return (\n    <div id=\"app\" className=\"App\">\n      <GlobalStyle />\n\n      {appMode == \"home\" && (\n        <Home yearMode={yearMode} onProceed={startTimeline} />\n      )}\n      {appMode == \"timeline\" && (\n        <Timeline\n          yearMode={yearMode}\n          birthYear={birthYear}\n          setBirthYear={setBirthYear}\n          onYearChange={startTimeline}\n          openLegend={openLegend}\n          onTouchStart={() => setTouchInitiated(true)}\n          onWheel={() => setTouchInitiated(true)}\n        />\n      )}\n\n      <Intro\n        yearMode={yearMode}\n        blink={isTransitioning}\n        birthYear={birthYear}\n        onPageChange={() => {\n          onPageChange(\"timeline\");\n        }}\n      />\n\n      <MenuBar\n        mode={appMode}\n        yearMode={yearMode}\n        onYearModeChange={(mode) => setYearMode(mode)}\n        onHome={() => {\n          onPageChange(\"home\");\n        }}\n        onOpenAbout={() => setOpenAbout(true)}\n        onToggleLegend={() => setOpenLegend(!openLegend)}\n      />\n\n      <Dialog open={openAbout} setOpen={setOpenAbout}>\n        <p className=\"mb-0\">About</p>\n        <h2 className=\"mb-4\">จาก \"เด็กสมัยนี้\"</h2>\n        <p>\n          เราเชื่อว่าการเปลี่ยนแปลงจะเกิดขึ้นได้ ส่วนหนึ่งเกิดจากการเข้าใจกัน\n          และการเข้าใจกันจะเกิดขึ้นได้\n          ส่วนหนึ่งคือการเข้าใจว่าแต่ละคนเติบโตมาในสภาพแวดล้อมที่แตกต่างกัน\n          ถูกหล่อหลอมด้วยเหตุการณ์ต่างๆ ของยุคสมัยที่แตกต่างกัน\n          เราเลยอยากหาวิธีเทียบชีวิตของเรากับชีวิตของคนอื่นๆ\n        </p>\n        <p className=\"mb-4\">\n          เราหวังว่าการแชร์สิ่งนี้ให้คนรอบตัวคุณ\n          จะได้เริ่มบทสนทนาให้คุณและพวกเขาได้เข้าใจกันมากขึ้น\n        </p>\n        <p className=\"text-right\">\n          ธนวิชญ์ ประสงค์พงษ์ชัย - เด็กสมัย 1995\n          <br />\n          อลิษา ลิ้มไพบูลย์ - เด็กสมัย 1996\n        </p>\n        <p className=\"text-right\">ติดต่อพูดคุยกันเพิ่มเติมได้ที่ _____</p>\n      </Dialog>\n\n      <Tutorial show={appMode == 'timeline' && !touchInitiated}>\n        <ScrollAnimation/>\n      </Tutorial>\n\n      <BottomDrawer open={openLegend}>\n        <div \n          style={{ fontWeight: 'bold', cursor: 'pointer' }}\n          onClick={() => setOpenLegend(false)}>\n          <i className=\"fa fa-chevron-down\" /> สัญลักษณ์\n        </div>\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            flexGrow: 1,\n            gap: \"16px\",\n          }}\n        >\n          <span>\n            <LegendIcon\n              style={{ backgroundColor: handleColorType(\"thailand\") }}\n            >\n              <img src=\"/img/icon_th.png\" alt=\"thailand\"/>\n            </LegendIcon>\n            เหตุการณ์สำคัญไทย\n          </span>\n          <span>\n            <LegendIcon\n              style={{ backgroundColor: handleColorType(\"world\") }}\n            >\n              <i className=\"fa fa-globe-americas\" />\n            </LegendIcon>\n            เหตุการณ์สำคัญโลก\n          </span>\n          <span>\n            <LegendIcon\n              style={{ backgroundColor: handleColorType(\"birthyear\") }}\n            >\n              <i className=\"fa fa-baby\" />\n            </LegendIcon>\n            ปีเกิดบุคคลสำคัญ\n          </span>\n        </div>\n      </BottomDrawer>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n"],"sourceRoot":""}